[tox]
envlist = py35,py36,flake8,docs

[testenv]
deps =
    pip
    wheel
    pytest
    scipy
commands = pytest --doctest-modules --pyargs whatshap tests

[testenv:docs]
basepython = python3
changedir = doc
deps =
    sphinx
    sphinx_issues
commands = sphinx-build -q -W -b html -d {envtmpdir}/doctrees . {envtmpdir}/html

[testenv:flake8]
basepython = python3.6
deps = flake8
commands = flake8 whatshap/ tests/

[flake8]
max-line-length = 120
max-complexity = 40
# E203 whitespace before ':' -- must be ignored for Black
#
# The following ignores should be removed over time:
#
# E127 continuation line over-indented for visual indent
# E128 continuation line under-indented for visual indent
# E501 line too long
# E711 comparison to None should be 'if cond is None:'
# E741 ambiguous variable name 'l'
# F401 xy imported but unused
# F841 local var unused
#
extend-ignore = E127,E128,E203,E231,E501,E711,E741,F401,F841
